<!DOCTYPE html>
<html>
<head>
  <title>Getting Referral Code</title>
  <script>
    function sendToApp(ref) {
      if (window.AppInventor) {
        window.AppInventor.setWebViewString(ref);
        alert("Referral sent to app: " + ref);
      } else {
        alert("AppInventor object not available");
      }
    }

    window.onload = function () {
      const params = new URLSearchParams(window.location.search);
      const ref = params.get("ref");

      if (ref) {
        localStorage.setItem("referralCode", ref);
        sendToApp(ref);
      } else {
        const saved = localStorage.getItem("referralCode");
        if (saved) {
          sendToApp(saved);
        } else {
          alert("No referral code found.");
        }
      }
    };
  </script>
</head>
<body>
  Getting referral code...
</body>
</html>
