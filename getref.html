<!DOCTYPE html>
<html>
<head>
  <title>Reading referral...</title>
  <script>
    // Read cookie and extract referralCode
    function getReferralFromCookie() {
      const cookies = document.cookie.split(';');
      for (let i = 0; i < cookies.length; i++) {
        const cookie = cookies[i].trim();
        if (cookie.startsWith("referralCode=")) {
          return cookie.substring("referralCode=".length);
        }
      }
      return "";
    }

    const ref = getReferralFromCookie();

    // Notify user (optional during testing)
    if (ref) {
      alert("Referral code from cookie: " + ref);
    } else {
      alert("No referral code found.");
    }

    // Send to Kodular
    if (window.AppInventor) {
      window.AppInventor.setWebViewString(ref);
    }
  </script>
</head>
<body>
  <p>Getting referral code...</p>
</body>
</html>
